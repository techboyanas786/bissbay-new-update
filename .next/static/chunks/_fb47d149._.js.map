{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/Bissbay/bissbay-new-update/src/components/CustomIntlTelInput.jsx"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport IntlTelInput from 'react-intl-tel-input';\nimport 'react-intl-tel-input/dist/main.css';\nimport 'flag-icons/css/flag-icons.min.css';\nimport allCountries from \"../../public/countries.json\";\n\nfunction CustomIntlTelInput({ value, onChange, placeholder, defaultCountry, reset }) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedCountry, setSelectedCountry] = useState(defaultCountry);\n  const [phoneValue, setPhoneValue] = useState(\"\");\n  const dropdownRef = useRef(null);\n  const inputRef = useRef(null);\n\n  useEffect(() => {\n    const country = allCountries.find(c => c[1] === defaultCountry.toLowerCase());\n    if (country) {\n      setSelectedCountry(country[1]);\n      const dialCode = `+${country[2]}`;\n      setPhoneValue(`${dialCode} `);\n    }\n  }, [defaultCountry]);\n\n  useEffect(() => {\n    if (reset) {\n      const country = allCountries.find(c => c[1] === selectedCountry);\n      if (country) {\n        setPhoneValue(`+${country[2]} `);\n      }\n    }\n  }, [reset, selectedCountry]);\n\n  useEffect(() => {\n    if (value === \"\") {\n      const country = allCountries.find(c => c[1] === selectedCountry);\n      if (country) {\n        setPhoneValue(`+${country[2]} `);\n      }\n    }\n  }, [value, selectedCountry]);\n\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setIsOpen(false);\n        setSearchTerm(\"\");\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n\n  const filteredCountries = allCountries.filter(country =>\n    country[0].toLowerCase().includes(searchTerm.toLowerCase()) ||\n    country[2].includes(searchTerm)\n  );\n\n  const handleCountrySelect = (country) => {\n    setSelectedCountry(country[1]);\n    const dialCode = `+${country[2]}`;\n    const currentNumber = phoneValue.replace(/^\\+\\d+\\s*/, \"\");\n    const newValue = currentNumber ? `${dialCode} ${currentNumber}` : `${dialCode} `;\n    setPhoneValue(newValue);\n\n    if (currentNumber.trim()) {\n      onChange(true, newValue.trim(), { iso2: country[1] }, newValue.trim());\n    } else {\n      onChange(false, \"\", { iso2: country[1] }, \"\");\n    }\n\n    setIsOpen(false);\n    setSearchTerm(\"\");\n    setTimeout(() => inputRef.current?.focus(), 0);\n  };\n\n  const handleInputChange = (isValid, value, countryData, number) => {\n    const dialCode = countryData ? `+${countryData.dialCode}` : \"\";\n    if (value && !value.startsWith(dialCode)) {\n      const newValue = `${dialCode} ${value.replace(/^\\+\\d+\\s*/, \"\")}`.trim();\n      setPhoneValue(newValue);\n      onChange(isValid, newValue, countryData, newValue);\n    } else {\n      setPhoneValue(value || dialCode);\n      onChange(isValid, value, countryData, number);\n    }\n  };\n\n  const toggleDropdown = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsOpen(!isOpen);\n  };\n\n  const handlePhoneInputChange = (e) => {\n    const inputValue = e.target.value;\n    const country = allCountries.find(c => c[1] === selectedCountry);\n    const dialCode = country ? `+${country[2]}` : \"\";\n\n    // Only allow numbers, spaces, and the plus sign for dial code\n    const cleanedValue = inputValue.replace(/[^\\d\\s+]/g, '');\n\n    if (!cleanedValue.startsWith(dialCode)) {\n      const cleanNumber = cleanedValue.replace(/^\\+\\d+\\s*/, \"\").replace(/\\D/g, '');\n      const finalValue = cleanNumber ? `${dialCode} ${cleanNumber}` : `${dialCode} `;\n      setPhoneValue(finalValue);\n\n      const hasActualNumber = cleanNumber.trim().length > 0;\n      onChange(hasActualNumber, hasActualNumber ? finalValue.trim() : \"\", { iso2: selectedCountry, dialCode: country[2] }, hasActualNumber ? finalValue.trim() : \"\");\n    } else {\n      // Extract only the number part after dial code and clean it\n      const numberPart = cleanedValue.replace(dialCode, \"\").trim().replace(/\\D/g, '');\n      const newValue = numberPart ? `${dialCode} ${numberPart}` : `${dialCode} `;\n      setPhoneValue(newValue);\n\n      const hasActualNumber = numberPart.length > 0;\n      onChange(hasActualNumber, hasActualNumber ? newValue.trim() : \"\", { iso2: selectedCountry, dialCode: country[2] }, hasActualNumber ? newValue.trim() : \"\");\n    }\n  };\n\n  const handleKeyDown = (e) => {\n    const country = allCountries.find(c => c[1] === selectedCountry);\n    const dialCode = country ? `+${country[2]} ` : \"\";\n    const cursorPosition = e.target.selectionStart;\n\n    // Prevent backspace/delete from removing dial code\n    if ((e.key === 'Backspace' || e.key === 'Delete') && cursorPosition <= dialCode.length) {\n      e.preventDefault();\n    }\n  };\n\n  const handleClick = (e) => {\n    const country = allCountries.find(c => c[1] === selectedCountry);\n    const dialCode = country ? `+${country[2]} ` : \"\";\n    const cursorPosition = e.target.selectionStart;\n\n    // Prevent cursor from being placed before the dial code\n    if (cursorPosition < dialCode.length) {\n      e.target.setSelectionRange(dialCode.length, dialCode.length);\n    }\n  };\n\n  return (\n    <div className=\"intl-tel-input-wrapper\" ref={dropdownRef}>\n      <div className=\"intl-tel-input-container\">\n        <div className=\"custom-flag-dropdown\">\n          <button\n            type=\"button\"\n            className=\"selected-flag\"\n            onClick={toggleDropdown}\n            aria-expanded={isOpen}\n          >\n            <span className={`fi fi-${selectedCountry}`}></span>\n            <span className=\"arrow-icon\">â–¾</span>\n          </button>\n\n          {isOpen && (\n            <div className=\"country-list-dropdown\">\n              <div className=\"search-box\">\n                <input\n                  type=\"text\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  placeholder=\"Search country...\"\n                  className=\"search-input\"\n                  autoFocus\n                  onClick={(e) => e.stopPropagation()}\n                />\n              </div>\n              <ul className=\"country-list\">\n                {filteredCountries.map((country, index) => (\n                  <li\n                    key={`${country[1]}-${index}`}\n                    className=\"country-item\"\n                    onClick={() => handleCountrySelect(country)}\n                  >\n                    <span className={`fi fi-${country[1]}`}></span>\n                    <span className=\"country-name\">{country[0]}</span>\n                    <span className=\"dial-code\">+{country[2]}</span>\n                  </li>\n                ))}\n                {filteredCountries.length === 0 && (\n                  <li className=\"no-results\">No countries found</li>\n                )}\n              </ul>\n            </div>\n          )}\n        </div>\n\n        <div style={{ display: 'none' }}>\n          <IntlTelInput\n            ref={inputRef}\n            preferredCountries={[selectedCountry]}\n            defaultCountry={selectedCountry}\n            excludeCountries={['il']}\n            value={phoneValue}\n            onPhoneNumberChange={handleInputChange}\n            fieldName=\"phoneNumber\"\n            separateDialCode={false}\n            formatOnDisplay={true}\n            nationalMode={false}\n          />\n        </div>\n\n        <input\n          type=\"tel\"\n          value={phoneValue}\n          onChange={handlePhoneInputChange}\n          onKeyDown={handleKeyDown}\n          onClick={handleClick}\n          onFocus={handleClick}\n          placeholder={placeholder}\n          className=\"phone-input-field\"\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default CustomIntlTelInput;"],"names":[],"mappings":"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","debugId":null}}]
}